---
layout: post
title: "3장-단위테스트의 구조"
date: 2022-01-14
category: Study-UnitTest
---

### AAA패턴
- 준비, 실행, 검증 (Given, When, Then)이랑도 같은 말임
  - 준비: 테스트 대상 시스템과 의존성을 원하는 상태로 만듬.
  - 실행: 테스트를 원하는 메소드를 호출하고 출력을 저장
  - 검증: 결과를 검증한다. 저장된 출력값이나, 협력자의 상태를 확인할 수 있다.
- **주의**
  - 실행-검증을 여러번 하지말 것
  - 테스트에 조건문 쓰지말 것
  - 준비 구절이 너무 크다면 private클래스나 팩토리클래스를 고려할 것
  - 실행 구절이 한 줄 이상이라면 분리할 것을 고려하고, 한 번에 실행되야 한다면 캡슐화 할 것
  - 검증 구절은 모든 상태를 검증하며, 대상 객체 클래스의 동등한 멤버를 이용해서 검증하면 짧아질 수 있음

### 테스트간 픽스쳐 재사용
- 준비 구절에서 코드를 재사용하는 것은 코드를 간결하게 만드는데 도움이 됨
  - 테스트간에 결합도가 높아질 수 있음 (안티패턴)
  - 테스트의 가독성을 떨어뜨릴 수 있음
- **가독성이 좋은 이름의 비공개 팩토리 메소드를 이용해서 위 단점을 극복 할 수 있음**

### 단위 테스트 네이밍
- 대상이 되는 클래스의 네이밍을 sut로 하는 것이 좋음
- 굳이 엄격한 네이밍을 맞출 필요는 없음
- 테스트 이름에 메소드 이름을 포함하지 말고 편하게 읽었을 때, 이해가 잘되는 이름이 좋음

### 매개변수화 된 테스트
- 유사한 테스트를 여러개 진행해야 할 경우 매개변수화된 테스트를 이용하면 코드를 간결화 할 수 있음

### 검증문 라이브러리
- 검증할 때, 더 쉽게 읽히도록 단어 순서를 재구성하여 테스트 가독성을 향상 시킬 순 있음
